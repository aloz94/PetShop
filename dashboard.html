<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>לוח בקרה</title>
  <link rel="stylesheet" href="styles/dashboard.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
        crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="stylesheet" href="styles/kpi-dashboard.css"/>
</head>
<body>

 <div class="container">
    <aside class="sidebar">
      <div id="loggedInUserName" class="welcome-message"></div>
      <img src="res\logo.png" alt="Logo" class="sidebar-logo" style="width: 80px; display: block; margin: 16px auto;" />
      <div class="sidebar-top">Aloz</div>
      <ul>
        <li><a href="#" data-target="boarding">פנסיון</a></li>
        <li><a href="#" data-target="grooming">טיפוח</a></li>
        <li><a href="#" data-target="orders">הזמנות</a></li>
        <li><a href="#" data-target="products">מלאי</a></li>
        <li><a href="#" data-target="abandoned">פניות נטושים</a></li>
        <li><a href="#" data-target="delivry">שליחים</a></li>
        <li><a href="#" data-target="support">גורמי סיוע</a></li>
        <li><a href="#" data-target="manager-dashboard">לוח בקרה למנהל</a></li>

        <li><a href="#" data-target="help">לקוחות</a></li>
        <li><a href="#" data-target="manager-Report">דוחות</a></li>
      </ul>
      <button class="sidebar-bottom" onclick="logout()">התנתקות</button>
    </aside>

    

    <main class="main">
<!-- דאשבורד פנסיון-->
      <section class="content content--active" id="boarding">
        <div class="search-group">
          <button class="add-btn" type="button" id="openBoardingBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' תור</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="dog_id">מס' כלב (ID)</option>
            <option value="dog_name">שם כלב</option>
            <option value="check_in">תאריך כניסה</option>
            <option value="check_out">תאריך יציאה</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>

        <h1>ניהול פנסיון</h1>
        <header class="kpi-bar">
          <div class="kpi-card green" id="checkin_today">
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue" id="chekcout_todaynun">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" id="cancelled-Ap" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header>

        <table class="dashboard-table" id="boarding-posts">
          <thead>
            <tr>
              <th>מס' תור</th>
              <th>תאריך כניסה</th>
              <th>תאריך יציאה</th>
               <th>סטטוס</th>
              <th>שם כלב</th>
              <th>שם לקוח</th>
              <th>טלפון</th>
              <th>פעולות</th>
                   </tr>
          </thead>
          <tbody>
            <!-- ימולא ב-JS -->
          </tbody>
        </table>
        <div id="accordion-boarding"></div>

        <form id="editboardingpopup_form">
          <div id="boardingpopup" class="popup-container">
            <div class="popup-content">
              <span class="close-btn" onclick="closePopup('boardingpopup')">&times;</span>
              <img src="res/logo.png" alt="Logo" />
              <h2>הזמן / ערוך תור פנסיון</h2>
    
              <label>תאריך כניסה</label>
              <div class="input-field">
                <input type="date" id="checkinDate" required />
              </div>
    
              <label>תאריך יציאה</label>
              <div class="input-field">
                <input type="date" id="checkoutDate" required />
              </div>
    
              <label>בחירת כלב</label>
              <div class="input-field">
                <select id="boardingDogSelect" required>
                  <option value="">בחר כלב</option>
                  <!-- אפשר כאן למלא options סטטית, או לטעון דינמית דרך JS -->
                </select>
              </div>
              <label>הערות</label>
              <div class="input-field">
                <textarea id="boardingNotes" placeholder="הכנס הערות נוספות"></textarea>
              </div>
              <button type="submit" class="popup-button">שמור</button>
            </div>
          </div>
        </form>

        <div id="boardingCheckinsModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close-btn" onclick="closeCheckinsModal()">×</span>
    <h3>כניסות ממתינות להיום</h3>
    <table id="boardingCheckinsTable" class="appointments-table">
      <thead>
        <tr>
          <th>מספר</th>
          <th>שם הכלב</th>
          <th>נייד</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<div id="boardingCheckoutsModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close-btn" onclick="closeCheckoutsModal()">×</span>
    <h3>יציאות  היום</h3>
    <table id="boardingCheckoutsTable" class="appointments-table">
      <thead>
        <tr>
          <th>מספר</th>
          <th>שם הכלב</th>
          <th>נייד</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>


<!-- Deleted Modal-->
 <div id="cancelledAppointmentsModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close-btn" onclick="closeCancelledModal()">×</span>
    <h3>תורים שבוטלו היום</h3>
    <table id="cancelledAppointmentsTable">
<thead>
  <tr>
    <th>מספר</th>
    <th>שם הכלב</th>
    <th>שם הלקוח</th>
    <th>טלפון</th>
    <th>תאריך הזמנה</th>
  </tr>
</thead>
      <tbody></tbody>
    </table>
  </div>
</div>


      </section>
    

      <!-- דאשבורד טיפוח-->
      <section class="content" id="grooming">
<div class="search-group">
  <button class="add-btn" type="button" id="openGroomingBtn">
    <i class="fas fa-plus"></i>
  </button>

  <select id="groomingSearchCategory">
    <option value="">קטגורית חיפוש</option>
    <option value="id">מס' תור</option>
    <option value="service_id"> שירות </option>
    <option value="customer_id">מס' לקוח (ID)</option>
    <option value="customer_name">שם לקוח</option>
    <option value="dog_id">מס' כלב (ID)</option>
    <option value="dog_name">שם כלב</option>
    <option value="date">תאריך</option>
    <option value="status">סטטוס</option>
  </select>

  <input
    type="text"
    id="groomingSearchText"
    placeholder="חפש…"
    class="search-input"
  />

  <select class="search-select" id="groomingSearchStatusSelect" style="display:none">
    <option value="">כל הסטטוסים</option>
    <option value="scheduled">נקבע</option>
    <option value="in_treatment">בטיפול</option>
    <option value="waiting_pick">ממתין לאיסוף</option>
    <option value="completed">הושלם</option>
    <option value="cancelled">בוטל</option>
  </select>

<select class="search-select" id="groomingServiceSelect" style="display:none">
  <option value="">בחר שירות</option>
  <option value="1">רחצה וטיפוח מלא</option>
  <option value="2">תספורת קיץ</option>
  <option value="3">ניקוי שיניים</option>
</select>

  <button id="groomingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="groomingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>
        <h1>ניהול טיפוח</h1>
<header class="kpi-bar">
  <!-- כרטיס 1 - תורים היום -->
  <div class="kpi-card green" id="grooming_today">
    <div class="icon"><i class="fa-solid fa-calendar-check"></i></div>
    <div class="value" id="grooming-today">12</div>
    <div class="label">תורים לסיום היום</div>
  </div>
  <!-- כרטיס 2 - תור נוכחי -->
  <div class="kpi-card blue">
    <div class="icon"><i class="fa-solid fa-clock"></i></div>
    <div class="value" id="grooming-current">--</div>
    <div class="label">תור נוכחי</div>
  </div>

  <!-- כרטיס 3 - תור הבא -->
  <div class="kpi-card blue"  >
    <div class="icon"><i class="fa-solid fa-calendar-plus"></i></div>
    <div class="value" id="grooming-next">--</div>
    <div class="label">תור הבא</div>
  </div>

  <!-- כרטיס 4 - תורים שבוטלו -->
  <div class="kpi-card red" id="grooming_cancelled">
    <div class="icon"><i class="fas fa-times-circle"></i></div>
    <div class="value" id="grooming-cancelled-today">-</div>
    <div class="label">מבוטלים היום</div>
  </div>

</header>
        




        <table class="dashboard-table" id="grooming-posts">
          <thead>
            <tr>
              <th>מס' תור</th>
              <th>תאריך</th>
              <th>שעה</th>
              <th>שירות</th>
              <th>לקוח</th>
              <th>טלפון</th>
              <th>כלב</th>
            </tr>
          </thead>
          <tbody>
            
          </tbody>
        </table>
        <div id="accordion-grooming"></div>

          <div id="groomingTodayModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close-btn" onclick="closeGroomingModal()">×</span>
    <h3>תורים מתוכננים להיום</h3>
    <table id="groomingTodayTable" class="appointments-table">
      <thead>
        <tr>
          <th>מספר</th>
          <th>שעה</th>
          <th>שם הכלב</th>
          <th>שירות</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<div id="cancelledGroomingModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeCancelledGroomingModal()">&times;</span>
    <h2>תורים מבוטלים בטיפוח - היום</h2>
    <table class="modern-table">
      <thead>
        <tr>
          <th>מס׳</th>
          <th>שם הכלב</th>
          <th>שם הלקוח</th>
          <th>טלפון</th>
          <th>תאריך תור</th>
        </tr>
      </thead>
      <tbody id="cancelledGroomingTableBody">
        <!-- rows go here -->
      </tbody>
    </table>
  </div>
</div>


      </section>


    <section class="content" id="orders">

      <h2>הכנסות</h2>
      <p>כאן יופיעו נתוני הכנסות</p>
    </section>
  
<section class="content" id="products">
  <div class="search-group">
    <button class="add-btn" type="button" id="openProductBtn">
      <i class="fas fa-plus"></i>
    </button>
<select id="productSearchCategory">
  <option value="">קטגורית חיפוש</option>
  <option value="id">מס' מוצר</option>
  <option value="name">שם מוצר</option>
  <option value="category">קטגוריה</option>
  <option value="price">מחיר</option>
  <option value="stock_quantity">מלאי</option>
  <option value="min_quantity">כמות מינימלית</option>
  <option value="description">תיאור</option>
</select>
    <input id="productSearchText" type="text" placeholder="חפש…" class="search-input" />
    <button id="productSearchBtn" class="btn-search" title="חפש">
      🔍
    </button>
    <button id="productClearBtn" class="btn-clear" type="button" title="נקה">
      ✖
    </button>
  </div>
    <h2>מלאי מוצרים</h2>

  <div id="products-accordion"></div>
</section>

    <section class="content" id="abandoned">
              <div class="search-group">
          <button class="add-btn" type="button" id="openabndBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="abdnSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' פניה</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="handler">שליח</option>
            <option value="care_provider">גורם סיוע</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="abndSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="abndSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="open">חדש</option>
            <option value="inprogress">בטיפול</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>

        <select id="abndHandlerSelect" style="display: none;">
  <!-- Options will be dynamically populated -->
</select>
<select id="abndCareProviderSelect" style="display: none;">
  <!-- Options will be dynamically populated -->
</select>

<select id="abndStatusSelect" style="display: none;">
  <option value="">בחר סטטוס...</option>
  <option value="open">חדש</option>
  <option value="inprogress">בטיפול</option>
  <option value="accepted">התקבלה</option>
  <option value="rejected">נדחתה</option>
  <option value="ontheway">בדרך</option>
  <option value="completed">הושלם</option>
  <option value="cancelled">בוטל</option>
</select>
  <button id="abndSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="abndClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>

      
      <h2>פניות לכלבים נטושים</h2>
              <header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="new_today">12</div>
            <div class="label">פניות חדשות היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="open_reports">5</div>
            <div class="label">פמיות פתוחות </div>
          </div>
      
<div class="kpi-card" id="kpi-in-progress">
  <div class="kpi-sub-values">
    <div class="kpi-sub-value clickable" id="sub-courier">
      <span class="kpi-sub-number" id="unassigned-courier">–</span>
      <span class="kpi-sub-label">לא משויך שליח</span>
    </div>
    <div class="kpi-sub-value clickable" id="sub-care">
      <span class="kpi-sub-number" id="unassigned-care">–</span>
      <span class="kpi-sub-label">לא משויך גורם סיוע</span>
    </div>
  </div>
  <div class="value" id="in_progress_reports">–</div>
  <div class="kpi-label">בטיפול</div>

  <!-- (אופציונלי) קונטיינר לדיפולדן שב-JS נפתח בעת הצורך -->
  <div class="kpi-dropdown" id="kpi-dropdown" aria-hidden="true">
    <select id="kpi-select"></select>
  </div>
</div>

<div class="kpi-card" id="handlers_update">
  <div class="kpi-sub-values">
    <div class="kpi-sub-value clickable" id="sub-accepted">
      <span class="kpi-sub-number" id="Hacceptedcount">–</span>
      <span class="kpi-sub-label">פניות שהתקבלו</span>
    </div>
    <div class="kpi-sub-value clickable" id="sub-ontheway">
      <span class="kpi-sub-number" id="Honthewaycount">–</span>
      <span class="kpi-sub-label">פניות בדרך</span>
    </div>
    <div class="kpi-sub-value clickable" id="sub-rejected">
      <span class="kpi-sub-number" id="Hrejectedcount">–</span>
      <span class="kpi-sub-label">פניות נדחו</span>
    </div>
  </div>
  <div class="kpi-sub-value clickable" id="in_progress_reports">–</div>
  <div class="kpi-label"> פניות בטיפול שליחים</div>
</div>

  <div class="kpi-card red" id="Abandoned_cancelled">
    <div class="icon"><i class="fas fa-times-circle"></i></div>
    <div class="value" id="Abandoned-cancelled-today">-</div>
    <div class="label">מבוטלים היום</div>
  </div>
  </header>


      <table class="dashboard-table" id="abandoned-posts">
        <thead>
          <tr>
            <th>מס' דוח</th>
            <th>גודל כלב</th>
            <th>מצב בריאות</th>
            <th>כתובת</th>
            <th>הערות</th>
            <th>סטטוס</th>
            <th>שליח</th>
            <th>גורם מטפל</th>
            <th>תמונה</th>
          </tr>
        </thead>
        <tbody>
          <!-- ימולא ב-JS -->
        </tbody>
      </table>
      
      <div id="accordion-abandoned"></div>
<div id="img-modal" class="popup-container" style="display: none;">
    <span class="close-btn" onclick="closeImgModal()">&times;</span>
    <img id="img-modal-img" src="" alt="Image Preview">
  </div>
  <div id="abandonedCancelledModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeAbandonedCancelledModal()">&times;</span>
    <h3>פניות מבוטלות להיום</h3>
    <table id="abandonedCancelledTable" class="styled-table">
      <thead>
        <tr>
          <th>מספר</th>
          <th>שם מוסר</th>
          <th>טלפון</th>
          <th>תאריך דיווח</th>
        </tr>
      </thead>
      <tbody>
        <!-- JS יכניס את התוכן -->
      </tbody>
    </table>
  </div>
</div>


<div id="handlerReportsModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeHandlerReportsModal()">&times;</span>
    <h3>פניות לפי סטטוס</h3>
    <table id="handlerReportsTable" class="styled-table">
      <thead>
        <tr>
          <th>מספר</th>
          <th>שם לקוח</th>
          <th>טלפון</th>
          <th>שם שליח</th>
          <th>מספר שליח</th>
          <th>תאריך דיווח</th>
        </tr>
      </thead>
      <tbody>
        <!-- נתונים יוזנו כאן -->
      </tbody>
    </table>
  </div>
</div>


          </section>


          
          <SECTION CLASS="content" ID="delivry">
                    <div class="search-group">
          <button class="add-btn" type="button" id="openHandlerBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="delivrySearchCategory">
  <option value="">קטגורית חיפוש</option>
  <option value="id">מס' שליח</option>
  <option value="name">שם שליח</option>
  <option value="phone">טלפון</option>
  <option value="vehicle_type">גודל רכב</option>
  <option value="address">כתובת</option>
  <option value="email">אימייל</option>
          </select>

  <input   id="delivrySearchText" type="text"  placeholder="חפש…"  class="search-input"  />
<select id="vehicleTypeSelect" style="display:none">
  <option value="">בחר גודל רכב...</option>
  <option value="גדול">גדול</option>
  <option value="בינוני">בינוני</option>
  <option value="קטן">קטן</option>
</select>
  <button id="delivrySearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="delivryClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>
            <h2>שליחים</h2>

        <!--<header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header>-->


            <table class="dashboard-table" id="handlers-posts">
              <thead>
                <tr>
                  <th>מס' שליח</th>
                  <th>שם</th>
                </tr>
              </thead>
              <tbody>
      
              </tbody>
            </table>
          
            <div id="accordion-handlers"></div>
      
      </section>
      <section class="content" id="support">
                <div class="search-group">
          <button class="add-btn" type="button" id="openBoardingBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' גורם</option>
            <option value="dog_name">שם גורם</option>
            <option value="address">כתובת</option>
            <option value="phone">טלפון</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>
        <h2>גורמי סיוע</h2>

     <!--   <header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header>-->


        <table class="dashboard-table" id="support-posts">
          <thead>
            <tr>
              <th>מס' גורם</th>
              <th>שם</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      
        <div id="accordion-support"></div>
      </section>
    <section class="content" id="help">
              <div class="search-group">
          <button class="add-btn" type="button" id="openBoardingBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' תור</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="dog_id">מס' כלב (ID)</option>
            <option value="dog_name">שם כלב</option>
            <option value="check_in">תאריך כניסה</option>
            <option value="check_out">תאריך יציאה</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>
    <!--<header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header> -->

        <h2>לקוחות</h2>

      <table class="dashboard-table" id="customers-posts">
        <thead>
          <tr>
            <th>מס' לקוח</th>
            <th>שם</th>
            <th>טלפון</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    
      <!-- כאן נבנה את האקורדיון -->
      <div id="accordion-customers"></div>
    
    </section>
    <!-- ============ Manager Dashboard =========================== -->
 <section class="content" id="manager-dashboard">
  <h1>לוח בקרה למנהל</h1>
  <header class="kpi-bar">
    <div class="kpi-card green">
      <div class="icon"><i class="fas fa-users"></i></div>
      <div class="value" id="total-employees">--</div>
      <div class="label">סה"כ עובדים</div>
    </div>
    <div class="kpi-card blue">
      <div class="icon"><i class="fas fa-dog"></i></div>
      <div class="value" id="total-dogs">--</div>
      <div class="label">סה"כ כלבים בפנסיון</div>
    </div>
<div class="kpi-card orange">
  <div class="icon"><i class="fas fa-exclamation-triangle"></i></div>
  <div class="value" id="low-stock-count">--</div>
  <div class="label">מוצרים במלאי נמוך</div>
</div>
    <div class="kpi-card red">
      <div class="icon"><i class="fas fa-exclamation-triangle"></i></div>
      <div class="value" id="open-abandoned">--</div>
      <div class="label">פניות נטושים פתוחות</div>
    </div>
    <div class="kpi-card purple">
      <div class="icon"><i class="fas fa-shekel-sign"></i></div>
      <div class="value" id="revenue-today">--</div>
      <div class="label">הכנסות היום</div>
    </div>
  </header>
<section class="manager-charts-row">
  <!-- גרף הכנסות -->
  <div id="incomeChartContainer">
    <h2>הכנסות לפי מקור</h2>
    <canvas id="incomeChart"></canvas>
    <div id="incomeChartPeriodSelector">
      <label><input type="radio" name="incomePeriod" value="today" checked> היום</label>
      <label><input type="radio" name="incomePeriod" value="week"> שבוע</label>
      <label><input type="radio" name="incomePeriod" value="month"> חודש</label>
    </div>
  </div>

  <!-- גרף שירותים -->
  <div id="DailyGroomingPieChart">
    <h2>התפלגות תורים לפי שירות</h2>
    <canvas id="GroomingPieChart"></canvas>
    <div id="pieChartPeriodSelector">
      <label><input type="radio" name="piePeriod" value="today" checked> היום</label>
      <label><input type="radio" name="piePeriod" value="week"> שבוע</label>
      <label><input type="radio" name="piePeriod" value="month"> חודש</label>
    </div>
  </div>

  <div id="TopProductsChartContainer"  dir="rtl">
  <h2>5 המוצרים הנמכרים ביותר</h2>
  <canvas id="TopProductsChart"></canvas>
</div>

</section>
<!--<div id="incomeChartContainer" style="display: none;">
  <h2 id="incomeChartTitle">הכנסות יומיות</h2>
  <canvas id="incomeChart"></canvas>
</div>
<div id="DailyGroomingPieChart" >
  <h2>התפלגות תורים לפי שירות (היום)</h2>
  <canvas id="GroomingPieChart"></canvas>
</div>-->


  <div class="dashboard-row">
    <div class="dashboard-col">
      <h3>5 תורים אחרונים לפנסיון</h3>
      <ul id="recent-boarding-list"></ul>
    </div>
    <div class="dashboard-col">
      <h3>5 תורים אחרונים לטיפוח</h3>
      <ul id="recent-grooming-list"></ul>
    </div>
    <div class="dashboard-col">
      <h3>5 פניות נטושים אחרונות</h3>
      <ul id="recent-abandoned-list"></ul>
    </div>
    <div class="dashboard-col">
      <h3>5 מוצרים במלאי נמוך</h3>
      <ul id="low-stock-list"></ul>
    </div>
  </div>
</section>

<div style="display:none">
  <span id="rev-grooming"></span>
  <span id="rev-boarding"></span>
  <span id="rev-store"></span>
</div>

 <section class="content" id="manager-Report">
<div class="report-category-wrapper">

  <!-- לקוחות -->
<!-- ניהול לקוחות -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    👤 ניהול לקוחות
  </div>
  <div class="report-buttons">
    <!-- <button onclick="loadReport('customers-all')">👥 כל הלקוחות</button> -->
    <button onclick="loadReport('customers-new')">✨ לקוחות חדשים</button>
    <button onclick="loadReport('customers-active')">📅 לקוחות פעילים</button>
    <button onclick="loadReport('customers-inactive')">⚠️ לקוחות שאינם אקטיבים</button>
  </div>
</div>

<!-- ניהול פנסיון -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    🏨 ניהול פנסיון
  </div>
  <div class="report-buttons">
    <button onclick="loadReport('customers-returning')">♻️ לקוחות חוזררים</button>
    <button onclick="loadReport('boarding-upcoming')">📆 הזמנות פנסיון עוד</button>
    <!-- <button onclick="loadReport('boarding-occupancy')">🏨 תפוסה בפנסיון</button> -->
    <!-- <button onclick="loadReport('boarding-current')">🐶 כלבים ששוהים עכשיו</button> -->
  </div>
</div>

<!-- ניהול טיפוח -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    💇️ ניהול טיפוח
  </div>
  <div class="report-buttons">
    <button onclick="loadReport('grooming-returning')">♻️ לקוחות חוזררי בטיפוח</button>
    <button onclick="loadReport('grooming-upcoming')">📆 הזמנות טיפוח עוד</button>
    <!-- <button onclick="loadReport('grooming-daily')">🗓 פגישות ליום הנוכחי</button> -->
    <button onclick="loadReport('grooming-periodic')">📊 סקירה שבוע/חודש</button>
  </div>
</div>

<!-- מלאי ומכירות -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    📦 מלאי ומכירות
  </div>
  <div class="report-buttons">
    <button onclick="loadReport('inventory-status')">🏛️ מצב מלאי כללי</button>
    <button onclick="loadReport('products-sold-all')">💼 מוצרים נמכרים</button>
    <button onclick="loadReport('sales-summary')">💸 מכירות יומי/חודשי/שנתי</button>
    <button onclick="loadReport('sales-by-category')">📋 מכירות לפי קטגוריות</button>
  </div>
</div>

<!-- נטושים ותפעול -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    🐕 נטושים ותפעול
  </div>
  <div class="report-buttons">
    <button onclick="loadReport('dogs-in-treatment')">🦥 כלבים בטיפול פעילי</button>
    <button onclick="loadReport('referrals-comparison')">📊 השווות למקלט/וטרינר</button>
    <button onclick="loadReport('transport-counts')">🚗 כמה הסעות לכל שליח</button>
    <button onclick="loadReport('referrals-summary')">📢 הפניות לעמותות/וטרינרים</button>
  </div>
</div>

<!-- דו"חות כספיים -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    💰 דו"חות כספיים
  </div>
  <div class="report-buttons">
    <button onclick="loadReport('revenue-by-service')">💳 הכנסות לפי שירות</button>
    <button onclick="loadReport('revenue-by-products')">📈 הכנסות ממוצרים</button>
    <button onclick="loadReport('revenue-total')">📅 סכם כללי של הכנסות</button>
  </div>
</div>
</div>
    <section id="reportContainer">
  <p>בחרי דוח להצגה</p>
</section>


</main>

<!--****************************************Dashboard PopUps******************************************-->
<div id="lowStockModal" class="modal">
  <div class="modal-content">
    <span class="close-btn">&times;</span>
    <h2>מוצרים במלאי נמוך</h2>

    <!-- רשימת מוצרים -->
    <ul id="lowStockModalList" class="low-stock-list"></ul>
  </div>
</div>

<!-- popup add spa order-->

<form id="groomingpopup_form"> 
  <div id="groomingpopup" class="popup-container">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('groomingpopup')">&times;</span>
      <img src="res/logo.png" alt="Logo">
      <h2>הזמן פינוק לחייתך</h2>

      <div class="input-field">
        <input type="text" id="customerIdInput" placeholder="ת.ז. הלקוח" inputmode="numeric" required>
      </div>

      <!-- תאריך -->
      <div class="input-field">
        <input type="date" id="appointmentDate" required>
      </div>

      <!-- שעה -->
      <div class="input-field">
        <select id="hourSelect" required>
          <option value="">בחר שעה</option>
        </select>
      </div>

      <!-- שירות -->
      <div class="input-field">
        <select id="serviceSelect" required>
          <option value="">בחר שירות</option>
        </select>
      </div>

      <!-- כלב -->
      <div class="input-field">
        <select id="dogSelect" required>
          <option value="">בחר כלב</option>
        </select>
      </div>

      <!-- הערות -->
      <div class="input-field">
        
        <textarea id="notes" rows="3" placeholder="האם יש משהו חשוב שנדע?"></textarea>
      </div>

      <!-- מחיר -->
          <div id="priceDisplay" class="price-label">עלות - ₪0</div>
      
              
      <!-- כפתור שליחה -->
      <button class="popup-button" type="submit">הזמן תור</button>
    </div>
  </div>
</form>

<!-- popup edit spa order-->
 <form id="editgroomingpopup_form"> 
  <div id="editgroomingpopup"  style="display: none;">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('editgroomingpopup')">&times;</span>
      <img src="res/logo.png" alt="Logo">
      <h2>ערוך תור</h2>
<input type="hidden" id="EcustomerIdInput">


      <!-- תאריך -->
      <div class="input-field">
        <input type="date" id="EappointmentDate" required>
      </div>

      <!-- שעה -->
      <div class="input-field">
        <select id="EhourSelect" required>
          <option value="">בחר שעה</option>
        </select>
      </div>

      <!-- שירות -->
      <div class="input-field">
        <select id="EserviceSelect" required>
          <option value="">בחר שירות</option>
        </select>
      </div>

      <!-- כלב -->
      <div class="input-field">
        <select id="EdogSelect" required>
          <option value="">בחר כלב</option>
        </select>
      </div>

      <!-- הערות -->
      <div class="input-field">
        
        <textarea id="Enotes" rows="3" placeholder="האם יש משהו חשוב שנדע?"></textarea>
      </div>

      <!-- מחיר -->
          <div id="priceDisplay" class="price-label">עלות - ₪0</div>
      
              
      <!-- כפתור שליחה -->
      <button class="popup-button" type="submit">הזמן תור</button>
    </div>
  </div>
</form>


<!-- popup boaridng order-->
<form id="addboardingpopup_form">
    <div id="addboardingpopup" class="popup-container">
      <div class="popup-content">

        <span class="close-btn" onclick="closePopup('addboardingpopup')">&times;</span>
        <img src="res/logo.png" alt="Logo" />
        <h2>הזמן שירות פנסיון</h2>
        
              <div class="input-field">
                  
<input type="text" id="BcustomerIdInput" placeholder="ת.ז. הלקוח" required pattern="\d*" inputmode="numeric" maxlength="9">      </div>


        <label>תאריך כניסה</label>
        <div class="input-field">
          <input type="date" id="BcheckinDate" required />
        </div>
  
        <label>תאריך יציאה</label>
        <div class="input-field">
          <input type="date" id="BcheckoutDate" required />
        </div>
  
        <label>בחירת כלב</label>
        <div class="input-field">
          <select id="BboardingDogSelect" required>
            <option value="">בחר כלב</option>
          </select>
        </div>
  
        <label>הערות</label>
        <div class="input-field">
          <textarea id="BboardingNotes" placeholder="הכנס הערות נוספות"></textarea>
        </div>
  
        <button type="submit" class="popup-button" >שלח בקשה</button>
      </div>
    </div>
  </form>

<!-- popup edit boarding order-->
<form id="editboardingpopup_form">
    <div id="editboardingpopup" class="popup-container">
      <div class="popup-content">

        <span class="close-btn" onclick="closePopup('addboardingpopup')">&times;</span>
        <img src="res/logo.png" alt="Logo" />
        <h2>הזמן שירות פנסיון</h2>
        
              <div class="input-field">
        <input type="number" id="BcustomerIdInput" placeholder="ת.ז. הלקוח" required>
      </div>


        <label>תאריך כניסה</label>
        <div class="input-field">
          <input type="date" id="BcheckinDate" required />
        </div>
  
        <label>תאריך יציאה</label>
        <div class="input-field">
          <input type="date" id="BcheckoutDate" required />
        </div>
  
        <label>בחירת כלב</label>
        <div class="input-field">
          <select id="BboardingDogSelect" required>
            <option value="">בחר כלב</option>
          </select>
        </div>
  
        <label>הערות</label>
        <div class="input-field">
          <textarea id="BboardingNotes" placeholder="הכנס הערות נוספות"></textarea>
        </div>
  
        <button type="submit" class="popup-button" >שלח בקשה</button>
      </div>
    </div>
  </form>
 
  <!-- popup add product-->
    <form id="addProductForm" enctype="multipart/form-data">
   <div id="addProductPopup" class="popup-container" >
  <div class="popup-content">
    <span class="close-btn" onclick="closePopup('addProductPopup')">&times;</span>
            <img src="res/logo.png" alt="Logo" />

    <h2>הוסף מוצר חדש</h2>

          <label>שם מוצר:</label>
      <div class="input-field">
      <input type="text" name="name" required>
      </div>

      <label>קטגוריה:</label>
      <div class="input-field">
      <select name="category_id" id="categorySelect" required>
        <option value="">בחר קטגוריה</option>
      </select>
      </div>

      <label>מחיר:</label>
      <div class="input-field">
      <input type="number" step="0.01" name="price" required>
      </div>
      <label>כמות במלאי:</label>

      <div class="input-field">
      <input type="number" name="stock_quantity" required>
      </div>
      <label>כמות מינימלית:</label>

      <div class="input-field">
      <input type="number" name="min_quantity" required>
      </div>

      <label>תיאור:</label>
      <div class="input-field">
      <textarea name="description" rows="3"></textarea>
      </div>


            <label>תמונה:</label>

      <div class="input-field">
      <input type="file" name="img" accept="image/*" required>
      </div>

      <button type="submit" class="popup-button">📦 הוסף מוצר</button>
  </div>
</div>
    </form>

<!-- popup add handler-->
<form id="addHandlerForm">
  <div id="addHandlerPopup" class="popup-container">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('addHandlerPopup')">&times;</span>
      <img src="res/logo.png" alt="Logo" />
      <h2>הוסף שליח חדש</h2>

      <label>ת.ז. שליח:</label>
      <div class="input-field">
        <input type="text" id="handlerId" name="id" required pattern="\d*" inputmode="numeric" maxlength="9" />
      </div>

      <label>שם:</label>
      <div class="input-field">
        <input type="text" id="handlerName" name="name" required />
      </div>

      <label>טלפון:</label>
      <div class="input-field">
        <input type="text" id="handlerPhone" name="phone" required />
      </div>

      <label>כתובת:</label>
      <div class="input-field">
        <input type="text" id="handlerAddress" name="address" required />
      </div>

      <label>סוג רכב:</label>
      <div class="input-field">
        <select id="handlerVehicleType" name="vehicle_type" required>
          <option value="">בחר סוג רכב...</option>
          <option value="גדול">גדול</option>
          <option value="בינוני">בינוני</option>
          <option value="קטן">קטן</option>
        </select>
      </div>

      <label>אימייל:</label>
      <div class="input-field">
        <input type="email" id="handlerEmail" name="email" required />
      </div>

      <button type="submit" class="popup-button">הוסף שליח</button>
    </div>
  </div>
</form>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>


  <script src="script/dashboard.js"></script>
  <script src="script/Manager.js"></script>
</body>
</html>
