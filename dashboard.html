<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>לוח בקרה</title>
  <link rel="stylesheet" href="styles/dashboard.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
        crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="stylesheet" href="styles/kpi-dashboard.css"/>
</head>
<body>

 <div class="container">
  <aside class="sidebar">
    <div class="sidebar-header">
      <img src="res/logo.png" alt="Logo" class="sidebar-logo" />
      <div id="loggedInUserName" class="welcome-message">שלום, Aloz</div>
    </div>

    <nav class="sidebar-nav">
      <ul>
        <li>
          <a href="boarding.html" data-target="boarding">
            <i class="fa-solid fa-bed"></i>
            <span>פנסיון</span>
          </a>
        </li>
        <li>
          <a href="grooming.html" data-target="grooming">
            <i class="fa-solid fa-scissors"></i>
            <span>טיפוח</span>
          </a>
        </li>
        <li>
          <a href="orders.html" data-target="orders">
            <i class="fa-solid fa-cart-shopping"></i>
            <span>הזמנות</span>
          </a>
        </li>
        <li>
          <a href="products.html" data-target="products">
            <i class="fa-solid fa-boxes"></i>
            <span>מלאי</span>
          </a>
        </li>
        <li>
          <a href="abandoned.html" data-target="abandoned">
            <i class="fa-solid fa-dog"></i>
            <span>פניות נטושים</span>
          </a>
        </li>
        <li>
          <a href="delivery.html" data-target="delivry">
            <i class="fa-solid fa-truck"></i>
            <span>שליחים</span>
          </a>
        </li>
        <li>
          <a href="support.html" data-target="support">
            <i class="fa-solid fa-hands-helping"></i>
            <span>גורמי סיוע</span>
          </a>
        </li>
        <li>
          <a href="manager-dashboard.html" data-target="manager-dashboard">
            <i class="fa-solid fa-tachometer-alt"></i>
            <span>לוח בקרה</span>
          </a>
        </li>
        <li>
          <a href="clients.html" data-target="customers">
            <i class="fa-solid fa-users"></i>
            <span>לקוחות</span>
          </a>
        </li>
        <li>
          <a href="reports.html" data-target="manager-Report">
            <i class="fa-solid fa-chart-line"></i>
            <span>דוחות</span>
          </a>
        </li>
        <li>
          <a href="#" data-target="workers">
            <i class="fa-solid fa-users-cog"></i>
            <span>עובדים</span>
          </a>
        </li>
      </ul>
      
    </nav>

    <button class="sidebar-logout" onclick="logout()">
      <i class="fa-solid fa-sign-out-alt"></i>
      <span>התנתקות</span>
    </button>
  </aside>

    

    <main class="main">
<!-- דאשבורד פנסיון-->
      <section class="content content--active" id="boarding">
                <h1>ניהול פנסיון</h1>

<div class="boarding-header">
  <button id="prevDay" class="btn-nav">▶</button>
  <input type="date" id="selectedDate" class="date-input" />
  <button id="nextDay" class="btn-nav">◀</button>
</div>

        <!-- Container for the 10‐cell grid -->
<!-- 10-cell grid -->
<section id="boardingGrid" class="boarding-grid"></section>

<div id="bookingModal">
  <div class="modal-backdrop"></div>
  <div class="modal-content">
    <button id="modalClose" class="modal-close" aria-label="Close">&times;</button>
    <header class="modal-header">
      <h2>פרטי הזמנה</h2>
    </header>
    <div class="modal-body" id="modalBody">
      <div class="detail-row">
        <span class="icon">🐶</span><span class="label">כלב:</span><span class="value" id="detailDogName">—</span>
      </div>
      <div class="detail-row">
        <span class="icon">👤</span><span class="label">בעלים:</span><span class="value" id="detailCustomer">—</span>
      </div>
      <div class="detail-row">
        <span class="icon">📞</span><span class="label">טלפון:</span><span class="value" id="detailPhone">—</span>
      </div>
      <div class="detail-row">
        <span class="icon">📅</span><span class="label">כניסה:</span><span class="value" id="detailCheckIn">—</span>
      </div>
      <div class="detail-row">
        <span class="icon">🚪</span><span class="label">יציאה:</span><span class="value" id="detailCheckOut">—</span>
      </div>
      <div class="detail-row">
        <span class="icon">📝</span><span class="label">הערות:</span><span class="value" id="detailNotes">—</span>
      </div>
    </div>
  </div>
</div>

        <header class="kpi-bar">
          <div class="kpi-card green" id="checkin_today">
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue" id="chekcout_todaynun">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" id="cancelled-Ap" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header>
        <div class="search-group">
          <button class="add-btn" type="button" id="openBoardingBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' תור</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="dog_id">מס' כלב (ID)</option>
            <option value="dog_name">שם כלב</option>
            <option value="check_in">תאריך כניסה</option>
            <option value="check_out">תאריך יציאה</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>

        <table class="dashboard-table" id="boarding-posts">
          <thead>
            <tr>
              <th>מס' תור</th>
              <th>תאריך כניסה</th>
              <th>תאריך יציאה</th>
               <th>סטטוס</th>
              <th>שם כלב</th>
              <th>שם לקוח</th>
              <th>טלפון</th>
              <th>פעולות</th>
                   </tr>
          </thead>
          <tbody>
            <!-- ימולא ב-JS -->
          </tbody>
        </table>
        <div id="accordion-boarding"></div>

        <form id="editboardingpopup_form">
          <div id="boardingpopup" class="popup-container">
            <div class="popup-content">
              <span class="close-btn" onclick="closePopup('boardingpopup')">&times;</span>
              <img src="res/logo.png" alt="Logo" />
              <h2> ערוך תור פנסיון</h2>
    
              <label>תאריך כניסה</label>
              <div class="input-field">
                <input type="date" id="checkinDate" required />
              </div>
    
              <label>תאריך יציאה</label>
              <div class="input-field">
                <input type="date" id="checkoutDate" required />
              </div>
    
              <label>בחירת כלב</label>
              <div class="input-field">
                <select id="boardingDogSelect" required>
                  <option value="">בחר כלב</option>
                  <!-- אפשר כאן למלא options סטטית, או לטעון דינמית דרך JS -->
                </select>
              </div>
              <label>הערות</label>
              <div class="input-field">
                <textarea id="boardingNotes" placeholder="הכנס הערות נוספות"></textarea>
              </div>
              <button type="submit" class="popup-button">שמור</button>
            </div>
          </div>
        </form>

        <div id="boardingCheckinsModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close-btn" onclick="closeCheckinsModal()">×</span>

    <h3>כניסות היום</h3>
    <table id="boardingCheckinsTable" class="appointments-table">
      <thead>
        <tr>
          <th> מספר הזמנה</th>
          <th>שם הכלב</th>
          <th>שם הלקוח</th>
          <th>נייד</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<div id="boardingCheckoutsModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close-btn" onclick="closeCheckoutsModal()">×</span>
    <h3>יציאות  היום</h3>
    <table id="boardingCheckoutsTable" class="appointments-table">
      <thead>
        <tr>
          <th> מספר הזמנה</th>
          <th>שם הכלב</th>
          <th>שם הלקוח</th>
          <th>נייד</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>


<!-- Deleted Modal-->
 <div id="cancelledAppointmentsModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close-btn" onclick="closeCancelledModal()">×</span>
    <h3>תורים שבוטלו היום</h3>
    <table id="cancelledAppointmentsTable">
<thead>
  <tr>
    <th>מספר</th>
    <th>שם הכלב</th>
    <th>שם הלקוח</th>
    <th>טלפון</th>
    <th>תאריך כניסה</th>
    <th>תאריך יציאה</th>
  </tr>
</thead>
      <tbody></tbody>
    </table>
  </div>
</div>
      </section>
    

      <!-- דאשבורד טיפוח-->
      <section class="content" id="grooming">
  <h1 class="page-title">לוח התורים לטיפוח כלבים</h1>

<section class="timeline-container">
  <div class="timeline-header">
    <button id="GprevDay">▶</button>
    <input type="date" id="GselectedDate">
    <button id="GnextDay">◀</button>
    <select id="serviceFilter">
      <option value="">כל השירותים</option>
    </select>
  </div>

<div class="timeline-content">
  <div class="timeline-labels" id="timelineLabels"></div>
  <div class="timeline-appointments" id="timelineGrid"></div>
</div>
</section>




<header class="kpi-bar">
  <!-- כרטיס 1 - תורים היום -->
  <div class="kpi-card green" id="grooming_today">
    <div class="icon"><i class="fa-solid fa-calendar-check"></i></div>
    <div class="value" id="grooming-today">12</div>
    <div class="label">תורים לסיום היום</div>
  </div>
  <!-- כרטיס 2 - תור נוכחי -->
  <div class="kpi-card blue">
    <div class="icon"><i class="fa-solid fa-clock"></i></div>
    <div class="value" id="grooming-current">--</div>
    <div class="label">תור נוכחי</div>
  </div>

  <!-- כרטיס 3 - תור הבא -->
  <div class="kpi-card blue"  >
    <div class="icon"><i class="fa-solid fa-calendar-plus"></i></div>
    <div class="value" id="grooming-next">--</div>
    <div class="label">תור הבא</div>
  </div>

  <!-- כרטיס 4 - תורים שבוטלו -->
  <div class="kpi-card red" id="grooming_cancelled">
    <div class="icon"><i class="fas fa-times-circle"></i></div>
    <div class="value" id="grooming-cancelled-today">-</div>
    <div class="label">מבוטלים היום</div>
  </div>

</header>
        
<div class="search-group">
  <button class="add-btn" type="button" id="openGroomingBtn">
    <i class="fas fa-plus"></i>
  </button>

  <select id="groomingSearchCategory">
    <option value="">קטגורית חיפוש</option>
    <option value="id">מס' תור</option>
    <option value="service_id"> שירות </option>
    <option value="customer_id">מס' לקוח (ID)</option>
    <option value="customer_name">שם לקוח</option>
    <option value="dog_id">מס' כלב (ID)</option>
    <option value="dog_name">שם כלב</option>
    <option value="date">תאריך</option>
    <option value="status">סטטוס</option>
  </select>

  <input
    type="text"
    id="groomingSearchText"
    placeholder="חפש…"
    class="search-input"
  />

  <select class="search-select" id="groomingSearchStatusSelect" style="display:none">
    <option value="">כל הסטטוסים</option>
    <option value="scheduled">נקבע</option>
    <option value="in_treatment">בטיפול</option>
    <option value="waiting_pick">ממתין לאיסוף</option>
    <option value="completed">הושלם</option>
    <option value="cancelled">בוטל</option>
  </select>

<select class="search-select" id="groomingServiceSelect" style="display:none">
  <option value="">בחר שירות</option>
  <option value="1">רחצה וטיפוח מלא</option>
  <option value="2">תספורת קיץ</option>
  <option value="3">ניקוי שיניים</option>
</select>

  <button id="groomingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="groomingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>





        <table class="dashboard-table" id="grooming-posts">
          <thead>
            <tr>
              <th>מס' תור</th>
              <th>תאריך</th>
              <th>שעה</th>
              <th>שירות</th>
              <th>לקוח</th>
              <th>טלפון</th>
              <th>כלב</th>
            </tr>
          </thead>
          <tbody>
            
          </tbody>
        </table>
        <div id="accordion-grooming"></div>

          <div id="groomingTodayModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close-btn" onclick="closeGroomingModal()">×</span>
    <h3>תורים מתוכננים להיום</h3>
    <table id="groomingTodayTable" class="appointments-table">
      <thead>
        <tr>
          <th>מספר תור</th>
          <th>שעה</th>
          <th>שם הכלב</th>
          <th>שם הלקוח</th>
          <th>טלפון</th>
          <th>שירות</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<div id="cancelledGroomingModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeCancelledGroomingModal()">&times;</span>
    <h2 style="text-align: center;">תורים מבוטלים בטיפוח - היום</h2>
    <table class="modern-table">
      <thead>
        <tr>
          <th>מספר תור</th>
          <th>תאריך תור</th>
          <th>שעה</th>
          <th>שם כלב</th>
          <th>שם לקוח</th>
          <th>טלפון</th>
        </tr>
      </thead>
      <tbody id="cancelledGroomingTableBody">
        <!-- rows go here -->
      </tbody>
    </table>
  </div>
</div>


      </section>


    <section class="content" id="orders">
<header class="kpi-bar">

  <!-- new orders: green + shopping-cart icon -->
  <div class="kpi-card green" id="new_orders">
    <div class="icon">
      <i class="fas fa-cart-plus"></i>
    </div>
    <div class="value" id="new_orders_count">12</div>
    <div class="label">הזמנות חדשות</div>
  </div>

  <!-- pending / in-treatment: yellow + spinner icon -->
  <div class="kpi-card yellow" id="pending_orders">
    <div class="icon">
      <i class="fas fa-spinner fa-spin"></i>
    </div>
    <div class="value" id="pending_orders_count">6</div>
    <div class="label">הזמנות בטיפול</div>
  </div>

  <!-- on the way: blue + truck icon -->
  <div class="kpi-card blue" id="ontheway_orders">
    <div class="icon">
      <i class="fas fa-truck"></i>
    </div>
    <div class="value" id="ontheway_orders_count">0</div>
    <div class="label">הזמנות בדרך</div>
  </div>

  <!-- cancelled: red + times-circle icon -->
  <div class="kpi-card red" id="cancelled_orders">
    <div class="icon">
      <i class="fas fa-times-circle"></i>
    </div>
    <div class="value" id="cancelled_orders_count">1</div>
    <div class="label">הזמנות מבוטלות</div>
  </div>

</header>
<div class="search-group">
  <button class="add-btn" type="button" id="openGroomingBtn">
    <i class="fas fa-plus"></i>
  </button>

  <select id="orderSearchCategory">
    <option value="">קטגורית חיפוש</option>
    <option value="id">מס' הזמנה</option>
    <option value="customer_id">מס' לקוח (ID)</option>
    <option value="customer_name">שם לקוח</option>
    <option value="date">תאריך הזמנה</option>
    <option value="status">סטטוס</option>
  </select>

  <input
    type="text"
    id="orderSearchText"
    placeholder="חפש…"
    class="search-input"
  />

  <select class="search-select" id="groomingSearchStatusSelect" style="display:none">
    <option value="">כל הסטטוסים</option>
    <option value="scheduled">נקבע</option>
    <option value="in_treatment">בטיפול</option>
    <option value="waiting_pick">ממתין לאיסוף</option>
    <option value="completed">הושלם</option>
    <option value="cancelled">בוטל</option>
  </select>

<!--<select class="search-select" id="groomingServiceSelect" style="display:none">
  <option value="">בחר שירות</option>
  <option value="1">רחצה וטיפוח מלא</option>
  <option value="2">תספורת קיץ</option>
  <option value="3">ניקוי שיניים</option>
</select>-->

  <button id="groomingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="groomingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>
      <h2>הזמנות</h2>

<div id="ordersAccordion"></div>

<!-- Orders Status Modal -->
<div id="ordersStatusModal" class="orders-modal hidden">
  <div class="orders-modal-backdrop"></div>
  <div class="orders-modal-content">
    <button id="ordersStatusModalClose" class="orders-modal-close">&times;</button>
    <header class="orders-modal-header">
      <h2 id="ordersStatusModalTitle">הזמנות</h2>
    </header>
    <div class="orders-modal-body" id="ordersStatusModalBody">
      <!-- filled dynamically -->
    </div>
  </div>
</div>

<!-- Edit Order Modal -->
<!-- ליד ה־editOrderModal הקיים, החלף / עדכן ל: -->
<div id="editOrderModal" class="modal" hidden>
  <div class="modal-content">
    <span class="close-btn" onclick="closeEditOrderModal()">&times;</span>
    <h3 class="modal-header">ערוך הזמנה</h3>
    <form id="editOrderForm">
      <input type="hidden" id="editOrderId">

      <!-- ====== חלק 1: פרטי הכתובת ====== -->
      <h4>פרטי הכתובת</h4>

      <div class="form-group">
        <label for="editCity">עיר</label>
        <input type="text" id="editCity" required class="border rounded p-2">
      </div>
      <div class="form-group">
        <label for="editStreet">רחוב</label>
        <input type="text" id="editStreet" required class="border rounded p-2">
      </div>
      <div class="form-group">
        <label for="editHouseNumber">מס׳ בית</label>
        <input type="text" id="editHouseNumber" required class="border rounded p-2">
      </div>

      <!-- ====== חלק 2: סה״כ (מחושב אוטומטית) ====== -->
      <div class="form-group">
        <label>סה״כ ההזמנה</label>
        <div id="editOrderTotal" style="font-size:1.2em; font-weight:bold;">₪0.00</div>
      </div>

      <!-- ====== חלק 3: פרטי מוצרים ====== -->
      <h4>פרטי מוצרים</h4>
      <!-- ====== סינון לפי קטגוריה ====== -->
<div style="display:flex; gap:8px; margin-bottom:12px;">
  <select id="productCategoryFilter" class="border rounded p-2">
    <option value="">כל הקטגוריות</option>
    <!-- יורכב דינמית ברגע הטעינה -->
  </select>
  <!-- ====== הוספת מוצר ====== -->
  <select id="newProductSelect" class="border rounded p-2">
    <option value="">בחר מוצר להוספה…</option>
  </select>
  <input id="newProductQty" type="number" min="1" value="1"
         style="width:4rem; padding:4px;"/>
  <button type="button" id="addProductBtn"
          style="padding:4px 8px; background:#28a745; color:#fff; border:none; border-radius:4px;">
    הוסף מוצר
  </button>
</div>

      <table>
        <thead>
          <tr>
            <th>מוצר</th>
            <th>כמות</th>
            <th>מחיר יחידה</th>
            <th>סה״כ שורה</th>
            <th>הסר</th>
          </tr>
        </thead>
        <tbody id="editOrderProducts">
          <!-- יורכב על־ידי JS -->
        </tbody>
      </table>

      <button type="submit" class="popup-button mt-4">שמור שינויים</button>
    </form>
  </div>
</div>

    </section>
  
<section class="content" id="products">
  <div class="search-group">
    <button class="add-btn" type="button" id="openProductBtn">
      <i class="fas fa-plus"></i>
    </button>
<select id="productSearchCategory">
  <option value="">קטגורית חיפוש</option>
  <option value="id">מס' מוצר</option>
  <option value="name">שם מוצר</option>
  <option value="category">קטגוריה</option>
  <option value="price">מחיר</option>
  <option value="stock_quantity">מלאי</option>
  <option value="min_quantity">כמות מינימלית</option>
  <option value="description">תיאור</option>
</select>
    <input id="productSearchText" type="text" placeholder="חפש…" class="search-input" />
    <button id="productSearchBtn" class="btn-search" title="חפש">
      🔍
    </button>
    <button id="productClearBtn" class="btn-clear" type="button" title="נקה">
      ✖
    </button>
  </div>
    <h2>מלאי מוצרים</h2>
<header class="kpi-bar">

  <!-- Low stock: orange + warning triangle -->
  <div class="kpi-card orange" id="low_stock">
    <div class="icon">
      <i class="fas fa-exclamation-triangle"></i>
    </div>
    <div class="value" id="low_stock_pro">12</div>
    <div class="label">מלאי נמוך</div>
  </div>

  <!-- Out of stock: red + empty box -->
  <div class="kpi-card red" id="out_stock">
    <div class="icon">
      <i class="fas fa-box-open"></i>
    </div>
    <div class="value" id="out_stock_pro">12</div>
    <div class="label">אזל מהמלאי</div>
  </div>

</header>

<div id="lowStockModal" class="modal">
  <div class="modal-content">
    <span class="modal-close" data-target="lowStockModal">&times;</span>
    <h2 style="text-align: center;">מלאי נמוך</h2>
    <div id="lowStockModalBody"></div>
  </div>
</div>

<!-- Out-Of-Stock Modal -->
<div id="outOfStockModal" class="modal">
  <div class="modal-content">
    <span class="modal-close" data-target="outOfStockModal">&times;</span>
    <h2 style="text-align: center;">אזל מהמלאי</h2>
    <div id="outOfStockModalBody"></div>
  </div>
</div>




  <div id="products-accordion"></div>

<!-- Edit Product Modal -->
<div id="editProductModal" class="modal">
  <div class="modal-content">
    <span class="modal-close" data-target="editProductModal">&times;</span>
    <h2 style="text-align: center;">ערוך מוצר</h2>
    <form id="editProductForm">
      <input type="hidden" id="edit-id" name="id">

      <div class="form-group">
        <label for="edit-name">שם מוצר</label>
        <input type="text" id="edit-name" name="name" required>
      </div>

      <div class="form-group">
        <label for="edit-category">קטגוריה</label>
        <select id="edit-category" name="category_id" required>
          <option value="">טוען קטגוריות…</option>
        </select>
      </div>

      <div class="form-group">
        <label for="edit-price">מחיר</label>
        <input type="number" id="edit-price" name="price" step="0.01" required>
      </div>

      <div class="form-group">
        <label for="edit-stock">כמות במלאי</label>
        <input type="number" id="edit-stock" name="stock_quantity" required>
      </div>

      <div class="form-group">
        <label for="edit-min">מינימום מלאי</label>
        <input type="number" id="edit-min" name="min_quantity" required>
      </div>

      <div class="form-group">
        <label for="edit-desc">תיאור</label>
        <textarea id="edit-desc" name="description"></textarea>
      </div>

      <button type="submit" class="save-btn"   style="display: block; margin: 0 auto;"
>שמור</button>
    </form>
  </div>
</div>

</section>

  <section class="content" id="abandoned">

      
      <h2>פניות לכלבים נטושים</h2>
              <header class="kpi-bar">
          <div class="kpi-card green" id="newTodayCard">
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="new_today">12</div>
            <div class="label">פניות חדשות היום</div>
          </div>

          <div class="kpi-card blue" id="openReportsCard">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="open_reports">5</div>
            <div class="label">פניות פתוחות</div>
          </div>
      
<div class="kpi-card" id="kpi-in-progress">
  <div class="kpi-sub-values">
    <div class="kpi-sub-value clickable" id="sub-courier">
      <span class="kpi-sub-number" id="unassigned-courier">–</span>
      <span class="kpi-sub-label">לא משויך שליח</span>
    </div>
    <div class="kpi-sub-value clickable" id="sub-care">
      <span class="kpi-sub-number" id="unassigned-care">–</span>
      <span class="kpi-sub-label">לא משויך גורם סיוע</span>
    </div>
  </div>
  <div class="value" id="in_progress_reports">–</div>
  <div class="kpi-label">בטיפול</div>

  <!-- (אופציונלי) קונטיינר לדיפולדן שב-JS נפתח בעת הצורך -->
  <div class="kpi-dropdown" id="kpi-dropdown" aria-hidden="true">
    <select id="kpi-select"></select>
  </div>
</div>

<div class="kpi-card" id="handlers_update">
  <div class="kpi-sub-values">
    <div class="kpi-sub-value clickable" id="sub-accepted">
      <span class="kpi-sub-number" id="Hacceptedcount">–</span>
      <span class="kpi-sub-label">פניות שהתקבלו</span>
    </div>
    <div class="kpi-sub-value clickable" id="sub-ontheway">
      <span class="kpi-sub-number" id="Honthewaycount">–</span>
      <span class="kpi-sub-label">פניות בדרך</span>
    </div>
    <div class="kpi-sub-value clickable" id="sub-rejected">
      <span class="kpi-sub-number" id="Hrejectedcount">–</span>
      <span class="kpi-sub-label">פניות נדחו</span>
    </div>
  </div>
  <div class="kpi-sub-value clickable" id="Htotalcount">–</div>
  <div class="kpi-label"> פניות בטיפול שליחים</div>
</div>

  <div class="kpi-card red" id="Abandoned_cancelled">
    <div class="icon"><i class="fas fa-times-circle"></i></div>
    <div class="value" id="Abandoned-cancelled-today">-</div>
    <div class="label">מבוטלים היום</div>
  </div>
       </header>

              <div class="search-group">
          <button class="add-btn" type="button" id="openabndBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="abdnSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' פניה</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="handler">שליח</option>
            <option value="care_provider">גורם סיוע</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="abndSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="abndSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="open">חדש</option>
            <option value="inprogress">בטיפול</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>

        <select id="abndHandlerSelect" style="display: none;">
  <!-- Options will be dynamically populated -->
</select>
<select id="abndCareProviderSelect" style="display: none;">
  <!-- Options will be dynamically populated -->
</select>

<select id="abndStatusSelect" style="display: none;">
  <option value="">בחר סטטוס...</option>
  <option value="open">חדש</option>
  <option value="inprogress">בטיפול</option>
  <option value="accepted">התקבלה</option>
  <option value="rejected">נדחתה</option>
  <option value="ontheway">בדרך</option>
  <option value="completed">הושלם</option>
  <option value="cancelled">בוטל</option>
</select>
  <button id="abndSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="abndClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
                </div>

      <table class="dashboard-table" id="abandoned-posts">
        <thead>
          <tr>
            <th>מס' דוח</th>
            <th>גודל כלב</th>
            <th>מצב בריאות</th>
            <th>כתובת</th>
            <th>הערות</th>
            <th>סטטוס</th>
            <th>שליח</th>
            <th>גורם מטפל</th>
            <th>תמונה</th>
          </tr>
        </thead>
        <tbody>
          <!-- ימולא ב-JS -->
        </tbody>
      </table>
      
      <div id="accordion-abandoned"></div>

      <div id="todayInquiriesModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal('todayInquiriesModal')">&times;</span>
    <h3 class="modal-header">פניות חדשות היום</h3>
    <table id="todayInquiriesTable">
      <thead>
        <tr>
          <th>מספר</th>
          <th>לקוח</th>
          <th>טלפון</th>
          <th>כתובת</th>
          <th>גודל כלב</th>
          <th>מצב בריאותי</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
        </div>

              <div id="openReportsModal" class="modal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal('openReportsModal')">&times;</span>
    <h3 class="modal-header">פניות פתוחות</h3>
    <table id="openReportsTable">
      <thead>
        <tr>
          <th>מספר</th>
          <th>לקוח</th>
          <th>טלפון</th>
          <th>כתובת</th>
          <th>גודל כלב</th>
          <th>מצב בריאותי</th>
          <th>תאריך דיווח</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
                  </div>


              <div id="img-modal" class="popup-container" style="display: none;">
    <span class="close-btn" onclick="closeImgModal()">&times;</span>
    <img id="img-modal-img" src="" alt="Image Preview">
          </div>
          <div id="abandonedCancelledModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeAbandonedCancelledModal()">&times;</span>
    <h3>פניות מבוטלות להיום</h3>
    <table id="abandonedCancelledTable" class="styled-table">
      <thead>
        <tr>
          <th>מספר</th>
          <th>לקוח </th>
          <th>טלפון</th>
          <th>תאריך דיווח</th>
        </tr>
      </thead>
      <tbody>
        <!-- JS יכניס את התוכן -->
      </tbody>
    </table>
  </div>
           </div>


<div id="handlerReportsModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeHandlerReportsModal()">&times;</span>
    <h3 id="handlerReportsModalHeader">פניות לפי סטטוס</h3>
    <table id="handlerReportsTable" class="styled-table">
      <thead>
        <tr>
          <th>מספר</th>
          <th>שם לקוח</th>
          <th>טלפון</th>
          <th>שם שליח</th>
          <th>מספר שליח</th>
          <th>תאריך דיווח</th>
        </tr>
      </thead>
      <tbody>
        <!-- נתונים יוזנו כאן -->
      </tbody>
    </table>
  </div>
</div>
      <div id="abandentpopup" class="popup-container">
      <div class="popup-content">
      <form id="abandentpopup_form" enctype="multipart/form-data">
            <span class="close-btn" onclick="closePopup('abandentpopup')">&times;</span>
            <img src="res/logo.png" alt="Logo">
            <h2>טופס דיווח על כלב נטוש</h2>
      
            <input type="text" id="BcustomerIdInput" placeholder="ת.ז. הלקוח" required pattern="\d*" inputmode="numeric" maxlength="9">      </div>

            <div class="input-field">
              <select id="dogSizeSelect" name="size" required>
                <option>גודל הכלב</option>
                <option>קטן</option>
                <option>בינוני</option>
                <option>גדול</option>
                <option>לא ידוע</option>

              </select>
            </div>
      
            <div class="input-field">
              <select id="healthStatusSelect" name="health" required >
                <option>מצב בריאותי</option>
                <option>בריא</option>
                <option>פצוע</option>
                <option>חולה</option>
                <option>לא ידוע</option>
              </select>
            </div>
      
            
            <div class="input-field">
              <input type="text" id="abandon_address" name="address" placeholder=" כתובת" required />
            </div>
      
            
            <textarea rows="4" class="textarea-field" id="abandon_notes" name="notes" placeholder="הכנס הערות"></textarea>
      
            
            <div class="file-upload">
              <span>העלה תמונות</span>
              <input type="file" id="picupload" name="image" accept="image/*">
            </div>
      
            <button type="submit" class="popup-button" onclick="submitAbandonedDogForm()">שלח טופס</button>
                  </form>

          </div>

      </section>

      <section class="content" id="delivry">

            <h2>שליחים</h2>

        <!--<header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header>-->

                    <div class="search-group">
          <button class="add-btn" type="button" id="openHandlerBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="delivrySearchCategory">
  <option value="">קטגורית חיפוש</option>
  <option value="id">מס' שליח</option>
  <option value="name">שם שליח</option>
  <option value="phone">טלפון</option>
  <option value="vehicle_type">גודל רכב</option>
  <option value="address">כתובת</option>
  <option value="email">אימייל</option>
          </select>

  <input   id="delivrySearchText" type="text"  placeholder="חפש…"  class="search-input"  />
<select id="vehicleTypeSelect" style="display:none">
  <option value="">בחר גודל רכב...</option>
  <option value="גדול">גדול</option>
  <option value="בינוני">בינוני</option>
  <option value="קטן">קטן</option>
</select>
  <button id="delivrySearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="delivryClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>

            <table class="dashboard-table" id="handlers-posts">
              <thead>
                <tr>
                  <th>מס' שליח</th>
                  <th>שם</th>
                </tr>
              </thead>
              <tbody>
      
              </tbody>
            </table>
          
            <div id="accordion-handlers"></div>
      
      </section>

      <section class="content" id="support">
        <h2>גורמי סיוע</h2>

     <!--   <header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header>-->

                <div class="search-group">
          <button class="add-btn" type="button" id="openBoardingBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' גורם</option>
            <option value="dog_name">שם גורם</option>
            <option value="type">סוג גורם</option>
            <option value="address">כתובת</option>
            <option value="phone">טלפון</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>

        <table class="dashboard-table" id="support-posts">
          <thead>
            <tr>
              <th>מס' גורם</th>
              <th>שם</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      
        <div id="accordion-support"></div>
      </section>
    <section class="content" id="customers">
              <div class="search-group">
          <button class="add-btn" type="button" id="openBoardingBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' תור</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="dog_id">מס' כלב (ID)</option>
            <option value="dog_name">שם כלב</option>
            <option value="check_in">תאריך כניסה</option>
            <option value="check_out">תאריך יציאה</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>
    <!--<header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header> -->

        <h2>לקוחות</h2>

      <table class="dashboard-table" id="customers-posts">
        <thead>
          <tr>
            <th>מס' לקוח</th>
            <th>שם</th>
            <th>טלפון</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    
      <!-- כאן נבנה את האקורדיון -->
      <div id="accordion-customers"></div>
    
    </section>
    <!-- ============ Manager Dashboard =========================== -->
 <section class="content" id="manager-dashboard">
  <h1>לוח בקרה למנהל</h1>
  <header class="kpi-bar">
    <div class="kpi-card green">
      <div class="icon"><i class="fas fa-users"></i></div>
      <div class="value" id="total-employees">--</div>
      <div class="label">סה"כ עובדים</div>
    </div>
    <div class="kpi-card blue">
      <div class="icon"><i class="fas fa-dog"></i></div>
      <div class="value" id="total-dogs">--</div>
      <div class="label">סה"כ כלבים בפנסיון</div>
    </div>
<div class="kpi-card orange" id="low-stock">
  <div class="icon"><i class="fas fa-exclamation-triangle"></i></div>
  <div class="value" id="low-stock-count">--</div>
  <div class="label">מוצרים במלאי נמוך</div>
</div>
    <div class="kpi-card red">
      <div class="icon"><i class="fas fa-exclamation-triangle"></i></div>
      <div class="value" id="open-abandoned">--</div>
      <div class="label">פניות נטושים פתוחות</div>
    </div>
    <div class="kpi-card purple">
      <div class="icon"><i class="fas fa-shekel-sign"></i></div>
      <div class="value" id="revenue-today">--</div>
      <div class="label">הכנסות היום</div>
    </div>
  </header>
<section class="manager-charts-row">
  <!-- גרף הכנסות -->
  <div id="incomeChartContainer">
    <h2>הכנסות לפי מקור</h2>
    <canvas id="incomeChart"></canvas>
    <div id="incomeChartPeriodSelector">
      <label><input type="radio" name="incomePeriod" value="today" checked> היום</label>
      <label><input type="radio" name="incomePeriod" value="week"> שבוע</label>
      <label><input type="radio" name="incomePeriod" value="month"> חודש</label>
    </div>
  </div>

  <!-- גרף שירותים -->
  <div id="DailyGroomingPieChart">
    <h2>התפלגות תורים לפי שירות</h2>
    <canvas id="GroomingPieChart"></canvas>
    <div id="pieChartPeriodSelector">
      <label><input type="radio" name="piePeriod" value="today" checked> היום</label>
      <label><input type="radio" name="piePeriod" value="week"> שבוע</label>
      <label><input type="radio" name="piePeriod" value="month"> חודש</label>
    </div>
  </div>
<div>
      <canvas id="TopProductsChart"></canvas>

<div class="chart-controls" style="margin-bottom:1rem;">
  <span>טווח זמן:</span>
  <label style="margin-left:1rem;">
    <input type="radio" name="timeRange" value="today" checked>
    היום
  </label>
  <label style="margin-left:1rem;">
    <input type="radio" name="timeRange" value="week">
    השבוע
  </label>
  <label style="margin-left:1rem;">
    <input type="radio" name="timeRange" value="month">
    החודש
  </label>
</div>
</div>



  <!--<div id="TopProductsChartContainer"  dir="rtl">
  <h2>5 המוצרים הנמכרים ביותר</h2>
  <canvas id="TopProductsChart"></canvas>
</div>-->

</section>
<!--<div id="incomeChartContainer" style="display: none;">
  <h2 id="incomeChartTitle">הכנסות יומיות</h2>
  <canvas id="incomeChart"></canvas>
</div>
<div id="DailyGroomingPieChart" >
  <h2>התפלגות תורים לפי שירות (היום)</h2>
  <canvas id="GroomingPieChart"></canvas>
</div>-->


  <div class="dashboard-row">
    <div class="dashboard-col">
      <h3>5 תורים אחרונים לפנסיון</h3>
      <ul id="recent-boarding-list"></ul>
    </div>
    <div class="dashboard-col">
      <h3>5 תורים אחרונים לטיפוח</h3>
      <ul id="recent-grooming-list"></ul>
    </div>
    <div class="dashboard-col">
      <h3>5 פניות נטושים אחרונות</h3>
      <ul id="recent-abandoned-list"></ul>
    </div>
    <div class="dashboard-col">
      <h3>5 מוצרים במלאי נמוך</h3>
      <ul id="low-stock-list"></ul>
    </div>
  </div>
</section>

<div style="display:none">
  <span id="rev-grooming"></span>
  <span id="rev-boarding"></span>
  <span id="rev-store"></span>
</div>

 <section class="content" id="manager-Report">
<div class="report-category-wrapper">

  <!-- לקוחות -->
<!-- ניהול לקוחות -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    👤 ניהול לקוחות
  </div>
  <div class="report-buttons">
    <!-- <button onclick="loadReport('customers-all')">👥 כל הלקוחות</button> -->
    <button onclick="loadReport('customers-new')">✨ לקוחות חדשים</button>
    <button onclick="loadReport('customers-active')">📅 לקוחות פעילים</button>
    <button onclick="loadReport('customers-inactive')">⚠️ לקוחות שאינם אקטיבים</button>
  </div>
</div>

<!-- ניהול פנסיון -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    🏨 ניהול פנסיון
  </div>
  <div class="report-buttons">
    <button onclick="loadReport('customers-returning')">♻️ לקוחות חוזררים</button>
    <button onclick="loadReport('boarding-upcoming')">📆 הזמנות פנסיון עוד</button>
    <!-- <button onclick="loadReport('boarding-occupancy')">🏨 תפוסה בפנסיון</button> -->
    <!-- <button onclick="loadReport('boarding-current')">🐶 כלבים ששוהים עכשיו</button> -->
  </div>
</div>

<!-- ניהול טיפוח -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    💇️ ניהול טיפוח
  </div>
  <div class="report-buttons">
    <button onclick="loadReport('grooming-returning')">♻️ לקוחות חוזררי בטיפוח</button>
    <button onclick="loadReport('grooming-upcoming')">📆 הזמנות טיפוח עוד</button>
    <!-- <button onclick="loadReport('grooming-daily')">🗓 פגישות ליום הנוכחי</button> -->
    <button onclick="loadReport('grooming-periodic')">📊 סקירה שבוע/חודש</button>
  </div>
</div>

<!-- מלאי ומכירות -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    📦 מלאי ומכירות
  </div>
  <div class="report-buttons">
    <button onclick="loadReport('inventory-status')">🏛️ מצב מלאי כללי</button>
    <button onclick="loadReport('products-sold-all')">💼 מוצרים נמכרים</button>
    <button onclick="loadReport('sales-summary')">💸 מכירות יומי/חודשי/שנתי</button>
    <button onclick="loadReport('sales-by-category')">📋 מכירות לפי קטגוריות</button>
  </div>
</div>

<!-- נטושים ותפעול -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    🐕 נטושים ותפעול
  </div>
  <div class="report-buttons">
    <button onclick="loadReport('dogs-in-treatment')">🦥 כלבים בטיפול פעילי</button>
    <button onclick="loadReport('referrals-comparison')">📊 השווות למקלט/וטרינר</button>
    <button onclick="loadReport('transport-counts')">🚗 כמה הסעות לכל שליח</button>
    <button onclick="loadReport('referrals-summary')">📢 הפניות לעמותות/וטרינרים</button>
  </div>
</div>

<!-- דו"חות כספיים -->
<div class="report-section">
  <div class="report-header" onclick="this.parentElement.classList.toggle('open')">
    💰 דו"חות כספיים
  </div>
  <div class="report-buttons">
    <button onclick="loadReport('revenue-by-service')">💳 הכנסות לפי שירות</button>
    <button onclick="loadReport('revenue-by-products')">📈 הכנסות ממוצרים</button>
    <button onclick="loadReport('revenue-total')">📅 סכם כללי של הכנסות</button>
  </div>
</div>
</div>
    <section id="reportContainer">
  <p>בחרי דוח להצגה</p>
</section>
</section>
<!-- ========= Employees Dashboard ========= -->
<section class="content" id="workers">
  <h2>עובדים</h2>
  <!-- (Optional) a table fallback if JS is disabled -->
                 <div class="search-group">
          <button class="add-btn" type="button" id="openEmployeeBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' תור</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="dog_id">מס' כלב (ID)</option>
            <option value="dog_name">שם כלב</option>
            <option value="check_in">תאריך כניסה</option>
            <option value="check_out">תאריך יציאה</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>

  <table id="employees-table" class="dashboard-table" style="display:none;">
    <thead>
      <tr>
        <th>מס' עובד</th>
        <th>שם מלא</th>
        <th>טלפון</th>
        <th>תפקיד</th>
      </tr>
    </thead>
    <tbody>
      <!-- JS will hide this and build the accordion instead -->
    </tbody>
  </table>

  <!-- This is where the JS will render the accordion -->
  <div id="employee-accordion"></div>
</section>


</main>

<!--****************************************Dashboard PopUps******************************************-->
<!-- Add Employee Popup (with explicit ID) -->
<form id="addEmployeeForm">
  <div id="addEmployeePopup" class="popup-container" hidden>
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('addEmployeePopup')">&times;</span>
      <img src="res/logo.png" alt="Logo" />
      <h2>הוסף עובד חדש</h2>

      <!-- NEW: Employee ID -->
  <div class="input-field">
    <input
      type="text"
      id="employeeId"
      placeholder="ת.ז. עובד"
      required
      pattern="\d+"
      inputmode="numeric"
      maxlength="10"
          oninput="this.value = this.value.replace(/\D/g, '')"

    />
 </div>

      <div class="input-field">
        <input type="text" id="employeeFullName" placeholder="שם מלא" required />
      </div>
  <div class="input-field">
    <select id="employeeRole" required>
      <option value="" disabled selected>בחר תפקיד…</option>
            <option value="manager">מנהל</option>
      <option value="groomingE">טיפוח</option>
      <option value="boardingE">פנסיון</option>
      <option value="abandonedE">נטושים</option>
      <option value="storeE">חנות</option>
      <option value="handlerE">שליח</option>
      <!-- תוכל להוסיף כאן עוד ערכים בהתאם לצורך -->
    </select>
  </div>
      <div class="input-field">
        <input type="text" id="employeePhone" placeholder="טלפון" required />
      </div>
      <div class="input-field">
        <input type="email" id="employeeEmail" placeholder="אימייל" required />
      </div>
      <div class="input-field">
        <input type="text" id="employeeAddress" placeholder="כתובת" required />
      </div>
      <div class="input-field">
        <input type="password" id="employeePassword" placeholder="סיסמה" required />
      </div>
      <div class="input-field">
        <input type="password" id="confirmPassword" placeholder="אשר סיסמה" required />
      </div>
      

      <button type="submit" class="popup-button">שמור עובד</button>
    </div>
  </div>
</form>
<!-- EDIT Employee Popup -->
<form id="editEmployeeForm">
  <div id="editEmployeePopup" class="popup-container" hidden>
    <div class="popup-content">
      <span class="close-btn" onclick="closeEditEmployee()">&times;</span>
      <h2>עריכת עובד</h2>

      <!-- holds the ID of the employee being edited -->
      <input type="hidden" id="editEmployeeId">

      <div class="input-field">
        <label for="editEmployeeName">שם מלא:</label>
        <input type="text" id="editEmployeeName" required />
      </div>
      <div class="input-field">
        <label for="editEmployeeRole">תפקיד:</label>
        <select id="editEmployeeRole" required>
          <option value="" disabled>בחר תפקיד…</option>
            <option value="manager">מנהל</option>
      <option value="groomingE">טיפוח</option>
      <option value="boardingE">פנסיון</option>
      <option value="abandonedE">נטושים</option>
      <option value="storeE">חנות</option>
      <option value="handlerE">שליח</option>
        </select>
      </div>
      <div class="input-field">
        <label for="editEmployeePhone">טלפון:</label>
        <input type="tel" id="editEmployeePhone" required />
      </div>
      <div class="input-field">
        <label for="editEmployeeEmail">אימייל:</label>
        <input type="email" id="editEmployeeEmail" required />
      </div>
      <div class="input-field">
        <label for="editEmployeeAddress">כתובת:</label>
        <input type="text" id="editEmployeeAddress" required />
      </div>
      <button type="button" id="togglePasswordBtn" class="popup-button" style="margin-bottom: 10px;">שנה סיסמה</button>

      <div class="input-field" id="editPasswordFields" style="display: none;">
        <input type="password" id="editEmployeePassword" placeholder="סיסמה חדשה" />
      </div>

      <button type="submit" class="popup-button">שמור שינויים</button>
    </div>
  </div>
</form>

<div id="lowStockModal" class="modal" style="display: none;">
  <div class="modal-content">
    <span class="close-btn">&times;</span>
    <h2>מוצרים במלאי נמוך</h2>

    <!-- רשימת מוצרים -->
    <ul id="lowStockModalList" class="low-stock-list"></ul>
  </div>
</div>

<!-- popup add spa order-->

<form id="groomingpopup_form"> 
  <div id="groomingpopup" class="popup-container">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('groomingpopup')">&times;</span>
      <img src="res/logo.png" alt="Logo">
      <h2>הזמן פינוק לחייתך</h2>

      <div class="input-field">
        <input type="text" id="customerIdInput" placeholder="ת.ז. הלקוח" inputmode="numeric" required>
      </div>

      <!-- תאריך -->
      <div class="input-field">
        <input type="date" id="appointmentDate" required>
      </div>
      
            <!-- שירות -->
      <div class="input-field">
        <select id="serviceSelect" required>
          <option value="">בחר שירות</option>
        </select>
      </div>



      <!-- שעה -->
      <div class="input-field">
        <select id="hourSelect" required>
          <option value="">בחר שעה</option>
        </select>
      </div>


      <!-- כלב -->
      <div class="input-field">
        <select id="dogSelect" required>
          <option value="">בחר כלב</option>
        </select>
      </div>

      <!-- הערות -->
      <div class="input-field">
        
        <textarea id="notes" rows="3" placeholder="האם יש משהו חשוב שנדע?"></textarea>
      </div>

      <!-- מחיר -->
          <div id="priceDisplay" class="price-label">עלות - ₪0</div>
      
              
      <!-- כפתור שליחה -->
      <button class="popup-button" type="submit">הזמן תור</button>
    </div>
  </div>
</form>

<!-- popup edit spa order-->
 <form id="editgroomingpopup_form"> 
  <div id="editgroomingpopup"  style="display: none;">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('editgroomingpopup')">&times;</span>
      <img src="res/logo.png" alt="Logo">
      <h2>ערוך תור</h2>
<input type="hidden" id="EcustomerIdInput">


      <!-- תאריך -->
      <div class="input-field">
        <input type="date" id="EappointmentDate" required>
      </div>

      <!-- שעה -->
      <div class="input-field">
        <select id="EhourSelect" required>
          <option value="">בחר שעה</option>
        </select>
      </div>

      <!-- שירות -->
      <div class="input-field">
        <select id="EserviceSelect" required>
          <option value="">בחר שירות</option>
        </select>
      </div>

      <!-- כלב -->
      <div class="input-field">
        <select id="EdogSelect" required>
          <option value="">בחר כלב</option>
        </select>
      </div>

      <!-- הערות -->
      <div class="input-field">
        
        <textarea id="Enotes" rows="3" placeholder="האם יש משהו חשוב שנדע?"></textarea>
      </div>

      <!-- מחיר -->
          <div id="priceDisplay" class="price-label">עלות - ₪0</div>
      
              
      <!-- כפתור שליחה -->
      <button class="popup-button" type="submit">הזמן תור</button>
    </div>
  </div>
</form>


<!-- popup boaridng order-->
<form id="addboardingpopup_form">
    <div id="addboardingpopup" class="popup-container">
      <div class="popup-content">

        <span class="close-btn" onclick="closePopup('addboardingpopup')">&times;</span>
        <img src="res/logo.png" alt="Logo" />
        <h2>הזמן שירות פנסיון</h2>
        
              <div class="input-field">
                  
<input type="text" id="BcustomerIdInput" placeholder="ת.ז. הלקוח" required pattern="\d*" inputmode="numeric" maxlength="9">      </div>


        <div class="input-field">
            <input
    type="text"
    id="BcheckinDate"
    placeholder="בחר תאריך כניסה"
    required
    onfocus="this.type='date'"
    onblur="if(!this.value) this.type='text'"
  />
        </div>
  
        <div class="input-field">
          <input
            type="text"
            id="BcheckoutDate"
            placeholder="בחר תאריך יציאה"
            required
            onfocus="this.type='date'"
            onblur="if(!this.value) this.type='text'"
          />
        </div>
  
        <div class="input-field">
          <select id="BboardingDogSelect" required>
            <option value="">בחר כלב</option>
          </select>
        </div>
  
        <div class="input-field">
          <textarea id="BboardingNotes" placeholder="הכנס הערות נוספות"></textarea>
        </div>
  
        <button type="submit" class="popup-button" >הזמן פנסיון</button>
      </div>
    </div>
  </form>

<!-- popup edit boarding order-->
<form id="editboardingpopup_form">
    <div id="editboardingpopup" class="popup-container">
      <div class="popup-content">

        <span class="close-btn" onclick="closePopup('addboardingpopup')">&times;</span>
        <img src="res/logo.png" alt="Logo" />
        <h2>עדכון פרטי הזמנה</h2>
        
              <div class="input-field">
        <input type="number" id="BcustomerIdInput" placeholder="ת.ז. הלקוח" required>
      </div>


        <label>תאריך כניסה</label>
        <div class="input-field">
          <input type="date" id="BcheckinDate" required />
        </div>
  
        <label>תאריך יציאה</label>
        <div class="input-field">
          <input type="date" id="BcheckoutDate" required />
        </div>
  
        <label>בחירת כלב</label>
        <div class="input-field">
          <select id="BboardingDogSelect" required>
            <option value="">בחר כלב</option>
          </select>
        </div>
  
        <label>הערות</label>
        <div class="input-field">
          <textarea id="BboardingNotes" placeholder="הכנס הערות נוספות"></textarea>
        </div>
  
        <button type="submit" class="popup-button" >שלח בקשה</button>
      </div>
    </div>
  </form>
 
  <!-- popup add product-->
    <form id="addProductForm" enctype="multipart/form-data">
   <div id="addProductPopup" class="popup-container" >
  <div class="popup-content">
    <span class="close-btn" onclick="closePopup('addProductPopup')">&times;</span>
            <img src="res/logo.png" alt="Logo" />

    <h2>הוסף מוצר חדש</h2>

      <div class="input-field">
      <input type="text" name="name" placeholder="הכנס שם מוצר" required>
      </div>

      <div class="input-field">
      <select name="category_id" id="categorySelect" required>
        <option value="">בחר קטגוריה</option>
      </select>
      </div>

      <div class="input-field">
      <input type="number" step="0.01" name="price" placeholder="הכנס מחיר" required>
      </div>

      <div class="input-field">
      <input type="number" name="stock_quantity" placeholder="הכנס כמות במלאי" required>
      </div>

      <div class="input-field">
      <input type="number" name="min_quantity" placeholder="הכנס כמות מינימלית" required>
      </div>

      <div class="input-field">
      <textarea name="description" rows="3" placeholder="הכנס תיאור"></textarea>
      </div>



      <div class="input-field">
        <span class="file-upload-label">בחר תמונה</span>
      <input type="file" name="img" accept="image/*" required>
      </div>

      <button type="submit" class="popup-button">📦 הוסף מוצר</button>
  </div>
</div>
    </form>

<!-- popup add handler-->
<form id="addHandlerForm">
  <div id="addHandlerPopup" class="popup-container">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('addHandlerPopup')">&times;</span>
      <img src="res/logo.png" alt="Logo" />
      <h2>הוסף שליח חדש</h2>

      <label>ת.ז. שליח:</label>
      <div class="input-field">
        <input type="text" id="handlerId" name="id" required pattern="\d*" inputmode="numeric" maxlength="9" />
      </div>

      <label>שם:</label>
      <div class="input-field">
        <input type="text" id="handlerName" name="name" required />
      </div>

      <label>טלפון:</label>
      <div class="input-field">
        <input type="text" id="handlerPhone" name="phone" required />
      </div>

      <label>כתובת:</label>
      <div class="input-field">
        <input type="text" id="handlerAddress" name="address" required />
      </div>

      <label>סוג רכב:</label>
      <div class="input-field">
        <select id="handlerVehicleType" name="vehicle_type" required>
          <option value="">בחר סוג רכב...</option>
          <option value="גדול">גדול</option>
          <option value="בינוני">בינוני</option>
          <option value="קטן">קטן</option>
        </select>
      </div>

      <label>אימייל:</label>
      <div class="input-field">
        <input type="email" id="handlerEmail" name="email" required />
      </div>

      <button type="submit" class="popup-button">הוסף שליח</button>
    </div>
  </div>
</form>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>


  <script src="script/dashboard.js"></script>
  <script src="script/Manager.js"></script>
</body>
</html>
