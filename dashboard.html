<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>לוח בקרה</title>
  <link rel="stylesheet" href="styles/dashboard.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
        crossorigin="anonymous" referrerpolicy="no-referrer" />

  <link rel="stylesheet" href="styles/kpi-dashboard.css"/>
</head>
<body>

 <div class="container">
    <aside class="sidebar">
      <img src="res\logo.png" alt="Logo" class="sidebar-logo" style="width: 80px; display: block; margin: 16px auto;" />
      <div class="sidebar-top">Aloz</div>
      <ul>
        <li><a href="#" data-target="profile">פנסיון</a></li>
        <li><a href="#" data-target="reports">טיפוח</a></li>
        <li><a href="#" data-target="earnings">הזמנות</a></li>
        <li><a href="#" data-target="users">מלאי</a></li>
        <li><a href="#" data-target="settings">פניות נטושים</a></li>
        <li><a href="#" data-target="delivry">שליחים</a></li>
        <li><a href="#" data-target="support">גורמי סיוע</a></li>

        <li><a href="#" data-target="help">לקוחות</a></li>
      </ul>
      <button class="sidebar-bottom" onclick="logout()">התנתקות</button>
    </aside>

    

    <main class="main">
<!-- דאשבורד פנסיון-->
      <section class="content content--active" id="profile">
        <div class="search-group">
          <button class="add-btn" type="button" id="openBoardingBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' תור</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="dog_id">מס' כלב (ID)</option>
            <option value="dog_name">שם כלב</option>
            <option value="check_in">תאריך כניסה</option>
            <option value="check_out">תאריך יציאה</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>

        <h1>ניהול פנסיון</h1>
        <header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header>

        <table class="dashboard-table" id="boarding-posts">
          <thead>
            <tr>
              <th>מס' תור</th>
              <th>תאריך כניסה</th>
              <th>תאריך יציאה</th>
               <th>סטטוס</th>
              <th>שם כלב</th>
              <th>שם לקוח</th>
              <th>טלפון</th>
              <th>פעולות</th>
                   </tr>
          </thead>
          <tbody>
            <!-- ימולא ב-JS -->
          </tbody>
        </table>
        <div id="accordion-boarding"></div>

        <form id="editboardingpopup_form">
          <div id="boardingpopup" class="popup-container">
            <div class="popup-content">
              <span class="close-btn" onclick="closePopup('boardingpopup')">&times;</span>
              <img src="res/logo.png" alt="Logo" />
              <h2>הזמן / ערוך תור פנסיון</h2>
    
              <label>תאריך כניסה</label>
              <div class="input-field">
                <input type="date" id="checkinDate" required />
              </div>
    
              <label>תאריך יציאה</label>
              <div class="input-field">
                <input type="date" id="checkoutDate" required />
              </div>
    
              <label>בחירת כלב</label>
              <div class="input-field">
                <select id="boardingDogSelect" required>
                  <option value="">בחר כלב</option>
                  <!-- אפשר כאן למלא options סטטית, או לטעון דינמית דרך JS -->
                </select>
              </div>
              <label>הערות</label>
              <div class="input-field">
                <textarea id="boardingNotes" placeholder="הכנס הערות נוספות"></textarea>
              </div>
              <button type="submit" class="popup-button">שמור</button>
            </div>
          </div>
        </form>
      </section>
    

      <!-- דאשבורד טיפוח-->
      <section class="content" id="reports">
<div class="search-group">
  <button class="add-btn" type="button" id="openGroomingBtn">
    <i class="fas fa-plus"></i>
  </button>

  <select id="groomingSearchCategory">
    <option value="">קטגורית חיפוש</option>
    <option value="id">מס' תור</option>
    <option value="service_id"> שירות </option>
    <option value="customer_id">מס' לקוח (ID)</option>
    <option value="customer_name">שם לקוח</option>
    <option value="dog_id">מס' כלב (ID)</option>
    <option value="dog_name">שם כלב</option>
    <option value="date">תאריך</option>
    <option value="status">סטטוס</option>
  </select>

  <input
    type="text"
    id="groomingSearchText"
    placeholder="חפש…"
    class="search-input"
  />

  <select class="search-select" id="groomingSearchStatusSelect" style="display:none">
    <option value="">כל הסטטוסים</option>
    <option value="scheduled">נקבע</option>
    <option value="in_treatment">בטיפול</option>
    <option value="waiting_pick">ממתין לאיסוף</option>
    <option value="completed">הושלם</option>
    <option value="cancelled">בוטל</option>
  </select>

<select class="search-select" id="groomingServiceSelect" style="display:none">
  <option value="">בחר שירות</option>
  <option value="1">רחצה וטיפוח מלא</option>
  <option value="2">תספורת קיץ</option>
  <option value="3">ניקוי שיניים</option>
</select>

  <button id="groomingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="groomingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>
        <h1>ניהול טיפוח</h1>
<header class="kpi-bar">
  <!-- כרטיס 1 - תורים היום -->
  <div class="kpi-card green">
    <div class="icon"><i class="fa-solid fa-calendar-check"></i></div>
    <div class="value" id="grooming-today">12</div>
    <div class="label">תורים לסיום היום</div>
  </div>

  <!-- כרטיס 2 - תור נוכחי -->
  <div class="kpi-card blue">
    <div class="icon"><i class="fa-solid fa-clock"></i></div>
    <div class="value" id="grooming-current">--</div>
    <div class="label">תור נוכחי</div>
  </div>

  <!-- כרטיס 3 - תור הבא -->
  <div class="kpi-card blue">
    <div class="icon"><i class="fa-solid fa-calendar-plus"></i></div>
    <div class="value" id="grooming-next">--</div>
    <div class="label">תור הבא</div>
  </div>

  <!-- כרטיס 4 - תורים שבוטלו -->
  <div class="kpi-card red">
    <div class="icon"><i class="fas fa-times-circle"></i></div>
    <div class="value" id="grooming-cancelled-today">-</div>
    <div class="label">מבוטלים היום</div>
  </div>
</header>
        
          



        <table class="dashboard-table" id="grooming-posts">
          <thead>
            <tr>
              <th>מס' תור</th>
              <th>תאריך</th>
              <th>שעה</th>
              <th>שירות</th>
              <th>לקוח</th>
              <th>טלפון</th>
              <th>כלב</th>
            </tr>
          </thead>
          <tbody>
            
          </tbody>
        </table>
        <div id="accordion-grooming"></div>

      </section>


    <section class="content" id="earnings">
      <h2>הכנסות</h2>
      <p>כאן יופיעו נתוני הכנסות</p>
    </section>
  
    <section class="content" id="users">
      <h2>משתמשים</h2>
      <p>כאן יהיה טבלת המשתמשים</p>
      
    </section>
  
    <section class="content" id="settings">
              <div class="search-group">
          <button class="add-btn" type="button" id="openabndBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="abdnSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' פניה</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="handler">שליח</option>
            <option value="care_provider">גורם סיוע</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="abndSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="abndSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="open">חדש</option>
            <option value="inprogress">בטיפול</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="abndSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="abndClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>

      
      <h2>פניות לכלבים נטושים</h2>
              <header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="new_today">12</div>
            <div class="label">פניות חדשות היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="open_reports">5</div>
            <div class="label">פמיות פתוחות </div>
          </div>
      
<div class="kpi-card" id="kpi-in-progress">
  <div class="kpi-sub-values">
    <div class="kpi-sub-value clickable" id="sub-courier">
      <span class="kpi-sub-number" id="unassigned-courier">–</span>
      <span class="kpi-sub-label">לא משויך שליח</span>
    </div>
    <div class="kpi-sub-value clickable" id="sub-care">
      <span class="kpi-sub-number" id="unassigned-care">–</span>
      <span class="kpi-sub-label">לא משויך גורם סיוע</span>
    </div>
  </div>
  <div class="value" id="in_progress_reports">–</div>
  <div class="kpi-label">בטיפול</div>

  <!-- (אופציונלי) קונטיינר לדיפולדן שב-JS נפתח בעת הצורך -->
  <div class="kpi-dropdown" id="kpi-dropdown" aria-hidden="true">
    <select id="kpi-select"></select>
  </div>
</div>
  </header>


      <table class="dashboard-table" id="abandoned-posts">
        <thead>
          <tr>
            <th>מס' דוח</th>
            <th>גודל כלב</th>
            <th>מצב בריאות</th>
            <th>כתובת</th>
            <th>הערות</th>
            <th>סטטוס</th>
            <th>שליח</th>
            <th>גורם מטפל</th>
            <th>תמונה</th>
          </tr>
        </thead>
        <tbody>
          <!-- ימולא ב-JS -->
        </tbody>
      </table>
      
      <div id="accordion-abandoned"></div>
          </section>


          
          <SECTION CLASS="content" ID="delivry">
                    <div class="search-group">
          <button class="add-btn" type="button" id="openBoardingBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' תור</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="dog_id">מס' כלב (ID)</option>
            <option value="dog_name">שם כלב</option>
            <option value="check_in">תאריך כניסה</option>
            <option value="check_out">תאריך יציאה</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>
            <h2>שליחים</h2>

        <header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header>


            <table class="dashboard-table" id="handlers-posts">
              <thead>
                <tr>
                  <th>מס' שליח</th>
                  <th>שם</th>
                </tr>
              </thead>
              <tbody>
      
              </tbody>
            </table>
          
            <div id="accordion-handlers"></div>
      
      </section>
      <section class="content" id="support">
                <div class="search-group">
          <button class="add-btn" type="button" id="openBoardingBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' תור</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="dog_id">מס' כלב (ID)</option>
            <option value="dog_name">שם כלב</option>
            <option value="check_in">תאריך כניסה</option>
            <option value="check_out">תאריך יציאה</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>
        <h2>גורמי סיוע</h2>

        <header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header>


        <table class="dashboard-table" id="support-posts">
          <thead>
            <tr>
              <th>מס' גורם</th>
              <th>שם</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      
        <div id="accordion-support"></div>
      </section>
    <section class="content" id="help">
              <div class="search-group">
          <button class="add-btn" type="button" id="openBoardingBtn">
         <i class="fas fa-plus"></i>
          </button>
          <select id="boardingSearchCategory">
            <option value="">קטגורית חיפוש</option>
            <option value="id">מס' תור</option>
            <option value="customer_id">מס' לקוח (ID)</option>
            <option value="customer_name">שם לקוח</option>
            <option value="dog_id">מס' כלב (ID)</option>
            <option value="dog_name">שם כלב</option>
            <option value="check_in">תאריך כניסה</option>
            <option value="check_out">תאריך יציאה</option>
            <option value="status">סטטוס</option>
          </select>
        
  <input   id="boardingSearchText" type="text"  placeholder="חפש…"  class="search-input"  />
          <select id="boardingSearchStatusSelect" style="display:none">
            <option value="">כל הסטטוסים</option>
            <option value="pending">ממתין</option>
            <option value="inprogress">בתהליך</option>
            <option value="completed">הושלם</option>
            <option value="cancelled">בוטל</option>
          </select>
        
  <button id="boardingSearchBtn" class="btn-search" title="חפש">
    🔍
  </button>
  <button id="boardingClearBtn" class="btn-clear" type="button" title="נקה">
    ✖
  </button>
</div>
        <header class="kpi-bar">
          <div class="kpi-card green" >
            <div class="icon"><i class="fas fa-sign-in-alt"></i>
            </div>
            <div class="value" id="checkins-today">12</div>
            <div class="label">כניסה היום</div>
          </div>
      
          <div class="kpi-card blue">
            <div class="icon"><i class="fas fa-sign-out-alt"></i>
            </div>
            <div class="value" id="checkouts-today">5</div>
            <div class="label">יציאה היום</div>
          </div>
      
          <div class="kpi-card red" >
            <div class="icon"><i class="fas fa-times-circle"></i>
            </div>
            <div class="value" id="cancelled-today">-</div>
            <div class="label">מבוטלים היום</div>
          </div>
      
          
        </header>

      <table class="dashboard-table" id="customers-posts">
        <thead>
          <tr>
            <th>מס' לקוח</th>
            <th>שם</th>
            <th>טלפון</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    
      <!-- כאן נבנה את האקורדיון -->
      <div id="accordion-customers"></div>
    
    </section>
</main>

<!--****************************************Dashboard PopUps******************************************-->

<!-- popup add spa order-->

<form id="groomingpopup_form"> 
  <div id="groomingpopup" class="popup-container">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('groomingpopup')">&times;</span>
      <img src="res/logo.png" alt="Logo">
      <h2>הזמן פינוק לחייתך</h2>

      <div class="input-field">
        <input type="text" id="customerIdInput" placeholder="ת.ז. הלקוח" inputmode="numeric" required>
      </div>

      <!-- תאריך -->
      <div class="input-field">
        <input type="date" id="appointmentDate" required>
      </div>

      <!-- שעה -->
      <div class="input-field">
        <select id="hourSelect" required>
          <option value="">בחר שעה</option>
        </select>
      </div>

      <!-- שירות -->
      <div class="input-field">
        <select id="serviceSelect" required>
          <option value="">בחר שירות</option>
        </select>
      </div>

      <!-- כלב -->
      <div class="input-field">
        <select id="dogSelect" required>
          <option value="">בחר כלב</option>
        </select>
      </div>

      <!-- הערות -->
      <div class="input-field">
        
        <textarea id="notes" rows="3" placeholder="האם יש משהו חשוב שנדע?"></textarea>
      </div>

      <!-- מחיר -->
          <div id="priceDisplay" class="price-label">עלות - ₪0</div>
      
              
      <!-- כפתור שליחה -->
      <button class="popup-button" type="submit">הזמן תור</button>
    </div>
  </div>
</form>

<!-- popup edit spa order-->
 <form id="editgroomingpopup_form"> 
  <div id="editgroomingpopup"  style="display: none;">
    <div class="popup-content">
      <span class="close-btn" onclick="closePopup('editgroomingpopup')">&times;</span>
      <img src="res/logo.png" alt="Logo">
      <h2>ערוך תור</h2>
<input type="hidden" id="EcustomerIdInput">


      <!-- תאריך -->
      <div class="input-field">
        <input type="date" id="EappointmentDate" required>
      </div>

      <!-- שעה -->
      <div class="input-field">
        <select id="EhourSelect" required>
          <option value="">בחר שעה</option>
        </select>
      </div>

      <!-- שירות -->
      <div class="input-field">
        <select id="EserviceSelect" required>
          <option value="">בחר שירות</option>
        </select>
      </div>

      <!-- כלב -->
      <div class="input-field">
        <select id="EdogSelect" required>
          <option value="">בחר כלב</option>
        </select>
      </div>

      <!-- הערות -->
      <div class="input-field">
        
        <textarea id="Enotes" rows="3" placeholder="האם יש משהו חשוב שנדע?"></textarea>
      </div>

      <!-- מחיר -->
          <div id="priceDisplay" class="price-label">עלות - ₪0</div>
      
              
      <!-- כפתור שליחה -->
      <button class="popup-button" type="submit">הזמן תור</button>
    </div>
  </div>
</form>


<!-- popup boaridng order-->
<form id="addboardingpopup_form">
    <div id="addboardingpopup" class="popup-container">
      <div class="popup-content">

        <span class="close-btn" onclick="closePopup('addboardingpopup')">&times;</span>
        <img src="res/logo.png" alt="Logo" />
        <h2>הזמן שירות פנסיון</h2>
        
              <div class="input-field">
        <input type="number" id="BcustomerIdInput" placeholder="ת.ז. הלקוח" required>
      </div>


        <label>תאריך כניסה</label>
        <div class="input-field">
          <input type="date" id="BcheckinDate" required />
        </div>
  
        <label>תאריך יציאה</label>
        <div class="input-field">
          <input type="date" id="BcheckoutDate" required />
        </div>
  
        <label>בחירת כלב</label>
        <div class="input-field">
          <select id="BboardingDogSelect" required>
            <option value="">בחר כלב</option>
          </select>
        </div>
  
        <label>הערות</label>
        <div class="input-field">
          <textarea id="BboardingNotes" placeholder="הכנס הערות נוספות"></textarea>
        </div>
  
        <button type="submit" class="popup-button" >שלח בקשה</button>
      </div>
    </div>
  </form>

<!-- popup edit boarding order-->
<form id="editboardingpopup_form">
    <div id="editboardingpopup" class="popup-container">
      <div class="popup-content">

        <span class="close-btn" onclick="closePopup('addboardingpopup')">&times;</span>
        <img src="res/logo.png" alt="Logo" />
        <h2>הזמן שירות פנסיון</h2>
        
              <div class="input-field">
        <input type="number" id="BcustomerIdInput" placeholder="ת.ז. הלקוח" required>
      </div>


        <label>תאריך כניסה</label>
        <div class="input-field">
          <input type="date" id="BcheckinDate" required />
        </div>
  
        <label>תאריך יציאה</label>
        <div class="input-field">
          <input type="date" id="BcheckoutDate" required />
        </div>
  
        <label>בחירת כלב</label>
        <div class="input-field">
          <select id="BboardingDogSelect" required>
            <option value="">בחר כלב</option>
          </select>
        </div>
  
        <label>הערות</label>
        <div class="input-field">
          <textarea id="BboardingNotes" placeholder="הכנס הערות נוספות"></textarea>
        </div>
  
        <button type="submit" class="popup-button" >שלח בקשה</button>
      </div>
    </div>
  </form>
 
  
  <script src="script/dashboard.js"></script>
</body>
</html>
